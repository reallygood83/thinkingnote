/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository
*/

var S=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var _=Object.prototype.hasOwnProperty;var R=(h,o)=>{for(var e in o)S(h,e,{get:o[e],enumerable:!0})},j=(h,o,e,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of V(o))!_.call(h,i)&&i!==e&&S(h,i,{get:()=>o[i],enumerable:!(t=K(o,i))||t.enumerable});return h};var Y=h=>j(S({},"__esModule",{value:!0}),h);var J={};R(J,{default:()=>A});module.exports=Y(J);var s=require("obsidian"),v="thinking-tool-connections",U=" - Materials",N={aiProvider:"gemini",openaiApiKey:"",anthropicApiKey:"",geminiApiKey:"",openaiModel:"gpt-4o",anthropicModel:"claude-sonnet-4-20250514",geminiModel:"gemini-2.5-flash-preview-05-20",materialNoteFolder:"",connectionsLimit:20,outputLanguage:"\uD55C\uAD6D\uC5B4"},A=class extends s.Plugin{constructor(){super(...arguments);this.settings=N;this.session={isActive:!1,sourceFilePath:null,materialNotePath:null,leftLeafId:null,centerLeafId:null,rightLeafId:null};this.floatingBtn=null;this.currentSelection=""}async onload(){await this.loadSettings(),this.registerView(v,e=>new b(e,this)),this.addCommand({id:"start-thinking-session",name:"Start Thinking Session",checkCallback:e=>{let t=this.app.workspace.getActiveFile();return t?(e||this.startThinkingSession(t),!0):!1}}),this.addCommand({id:"end-thinking-session",name:"End Thinking Session",checkCallback:e=>this.session.isActive?(e||this.endThinkingSession(),!0):!1}),this.addCommand({id:"generate-article",name:"Generate Article from Materials",checkCallback:e=>this.session.isActive&&this.session.materialNotePath?(e||this.openGenerateModal(),!0):!1}),this.registerEvent(this.app.workspace.on("editor-menu",(e,t,i)=>{if(!this.session.isActive)return;let n=t.getSelection();if(!n||n.trim().length===0)return;let a=i instanceof s.MarkdownView?i:null,r=(a==null?void 0:a.file)||this.app.workspace.getActiveFile();e.addItem(l=>{l.setTitle("\u{1F4DD} \uC18C\uC7AC\uB85C \uCD94\uAC00").setIcon("plus-circle").onClick(()=>{r?this.openThoughtModal(n,r.path):new s.Notice("Cannot determine source file")})})})),this.registerEvent(this.app.workspace.on("active-leaf-change",e=>{if(!this.session.isActive||!e)return;if(e.getViewState().type==="markdown"){let i=e.view.file;i&&i.path!==this.session.materialNotePath&&this.refreshConnectionsView(i.path)}})),this.addSettingTab(new E(this.app,this)),this.addRibbonIcon("brain","Start Thinking Tool",()=>{let e=this.app.workspace.getActiveFile();e?this.startThinkingSession(e):new s.Notice("Please open a note first")}),this.setupSelectionListener()}onunload(){this.app.workspace.detachLeavesOfType(v),this.removeFloatingButton()}setupSelectionListener(){this.floatingBtn=document.createElement("button"),this.floatingBtn.addClass("thinking-tool-floating-btn"),this.floatingBtn.setText("\u{1F4DD} \uC18C\uC7AC\uB85C \uCD94\uAC00"),this.floatingBtn.style.display="none",document.body.appendChild(this.floatingBtn),this.floatingBtn.onclick=e=>{if(e.preventDefault(),e.stopPropagation(),this.currentSelection){let t=this.app.workspace.getActiveFile();t&&this.openThoughtModal(this.currentSelection,t.path)}this.hideFloatingButton()},this.registerDomEvent(document,"mouseup",e=>{setTimeout(()=>this.handleSelectionChange(e),10)}),this.registerDomEvent(document,"mousedown",e=>{this.floatingBtn&&!this.floatingBtn.contains(e.target)&&this.hideFloatingButton()}),this.registerDomEvent(document,"keydown",()=>{this.hideFloatingButton()})}handleSelectionChange(e){if(!this.session.isActive)return;let t=window.getSelection(),i=t==null?void 0:t.toString().trim();i&&i.length>0?(this.currentSelection=i,this.showFloatingButton(e.clientX,e.clientY)):this.hideFloatingButton()}showFloatingButton(e,t){if(!this.floatingBtn)return;let i=120,n=32,a=e-i/2,r=t-n-10;a<10&&(a=10),a+i>window.innerWidth-10&&(a=window.innerWidth-i-10),r<10&&(r=t+20),this.floatingBtn.style.left=`${a}px`,this.floatingBtn.style.top=`${r}px`,this.floatingBtn.style.display="block"}hideFloatingButton(){this.floatingBtn&&(this.floatingBtn.style.display="none"),this.currentSelection=""}removeFloatingButton(){this.floatingBtn&&(this.floatingBtn.remove(),this.floatingBtn=null)}async loadSettings(){this.settings=Object.assign({},N,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async startThinkingSession(e){if(this.session.isActive){new s.Notice("A thinking session is already active. End it first.");return}let t=await this.createMaterialNote(e);if(!t){new s.Notice("Failed to create material note");return}this.session={isActive:!0,sourceFilePath:e.path,materialNotePath:t,leftLeafId:null,centerLeafId:null,rightLeafId:null},await this.setupThreePanelLayout(e.path,t),new s.Notice("Thinking session started! Select text and right-click to add materials.")}async endThinkingSession(){this.session.isActive&&(this.session={isActive:!1,sourceFilePath:null,materialNotePath:null,leftLeafId:null,centerLeafId:null,rightLeafId:null},this.app.workspace.detachLeavesOfType(v),new s.Notice("Thinking session ended"))}async createMaterialNote(e){var c;let t=e.basename+U,i=this.settings.materialNoteFolder||((c=e.parent)==null?void 0:c.path)||"";if(i=(0,s.normalizePath)(i),i){let d=this.app.vault.getAbstractFileByPath(i);if(d)d instanceof s.TFolder||(console.warn("Path is a file, not folder. Using vault root."),i="");else try{await this.app.vault.createFolder(i)}catch(p){console.log("Folder creation note:",p)}}let n=i?i+"/":"",a=(0,s.normalizePath)(`${n}${t}.md`),r=1;for(;this.app.vault.getAbstractFileByPath(a);)a=(0,s.normalizePath)(`${n}${t} ${r}.md`),r++;let l=`# Materials from [[${e.basename}]]

> [!info] Thinking Tool Session
> This note collects materials for article generation.
> Source: [[${e.basename}]]

---

`;try{return await this.app.vault.create(a,l),a}catch(d){console.error("Failed to create material note:",d);try{let p=(0,s.normalizePath)(`${t}.md`);return await this.app.vault.create(p,l),new s.Notice("Material note created in vault root (folder issue)"),p}catch(p){return console.error("Failed to create material note in root:",p),null}}}async appendMaterial(e,t,i){if(!this.session.materialNotePath)return;let n=this.app.vault.getAbstractFileByPath(this.session.materialNotePath);if(!(n instanceof s.TFile))return;let r=`
> [!quote] [[${t.replace(/\.md$/,"").split("/").pop()}]]
> ${e.split(`
`).join(`
> `)}
>
> **My Thought**: ${i||"_No thought added_"}

---

`,l=await this.app.vault.read(n);await this.app.vault.modify(n,l+r),new s.Notice("Material added!")}async setupThreePanelLayout(e,t){let i=this.app.workspace,n=i.getLeaf(),a=i.createLeafBySplit(n,"vertical");await a.setViewState({type:v,active:!1,state:{sourcePath:e}});let r=i.createLeafBySplit(a,"vertical");await r.openFile(this.app.vault.getAbstractFileByPath(t)),i.setActiveLeaf(n,{focus:!0}),this.session.leftLeafId=n.id,this.session.centerLeafId=a.id,this.session.rightLeafId=r.id,this.refreshConnectionsView(e)}async refreshConnectionsView(e){let t=this.app.workspace.getLeavesOfType(v);for(let i of t){let n=i.view;n&&await n.loadConnections(e)}}async getSmartConnections(e){var t,i,n;try{let a=(i=(t=this.app.plugins)==null?void 0:t.getPlugin)==null?void 0:i.call(t,"smart-connections");if(!a)return console.warn("Smart Connections plugin not found"),null;let r=a.env||(typeof globalThis!="undefined"?globalThis.smart_env:null);if(!r)return console.warn("Smart Connections environment not loaded"),null;r.state!=="loaded"&&await this.waitForSmartEnv(r);let l=(n=r.smart_sources)==null?void 0:n.get(e);return l?l.connections?await l.connections.get_results({limit:this.settings.connectionsLimit}):l.find_connections?await l.find_connections({limit:this.settings.connectionsLimit}):null:(console.warn("Source not found in Smart Connections:",e),null)}catch(a){return console.error("Error getting smart connections:",a),null}}waitForSmartEnv(e){return new Promise(t=>{let i=setInterval(()=>{e.state==="loaded"&&(clearInterval(i),t())},100);setTimeout(()=>{clearInterval(i),t()},1e4)})}openThoughtModal(e,t){new x(this.app,this,e,t).open()}openGenerateModal(){new C(this.app,this).open()}async generateTopicSuggestions(e){let t=this.settings.outputLanguage||"\uD55C\uAD6D\uC5B4",i=`You are a creative writing assistant. Based on the following collected materials, suggest 3 provocative and interesting topic/angle combinations for an article.

**IMPORTANT: All output must be written in ${t}.**

Materials:
${e}

For each suggestion, provide:
1. A compelling title (in ${t})
2. A brief description of the angle/approach (in ${t})
3. A simple outline with 3-5 bullet points (in ${t})

Be provocative and creative - suggest angles that might challenge assumptions or offer fresh perspectives.

Respond in JSON format (but content in ${t}):
[
  {
    "title": "...",
    "description": "...",
    "outline": ["point 1", "point 2", "point 3"]
  }
]`,n=await this.callAI(i);try{let a=n.match(/\[[\s\S]*\]/);return a?JSON.parse(a[0]):[]}catch(a){return console.error("Failed to parse topic suggestions"),[]}}async generateArticle(e,t,i){let n=this.settings.outputLanguage||"\uD55C\uAD6D\uC5B4",a={essay:`Write in a thoughtful, reflective essay style with depth and nuance. Use literary techniques and personal insights. Write entirely in ${n}.`,blog:`Write in a friendly, conversational blog style. Be engaging and accessible while maintaining substance. Write entirely in ${n}.`,academic:`Write in a formal academic style with clear argumentation, citations where appropriate, and rigorous analysis. Write entirely in ${n}.`,twitter:`Write as a compelling Twitter/X thread. Use short, punchy sentences. Include hooks and build tension. Format as numbered tweets. Write entirely in ${n}.`,custom:`Write in a clear, professional style that balances accessibility with depth. Write entirely in ${n}.`},r=`You are a skilled writer. Write an article based on the following:

**IMPORTANT: The entire article must be written in ${n}.**

Topic: ${t.title}
Approach: ${t.description}
Outline:
${t.outline.map((l,c)=>`${c+1}. ${l}`).join(`
`)}

Materials to incorporate:
${e}

Style: ${a[i]}

Important:
- Write the entire article in ${n}
- Incorporate the collected materials naturally
- Stay true to the user's collected thoughts and insights
- Don't add information that contradicts the materials
- Make the article coherent and well-structured

Write the complete article in ${n} now:`;return await this.callAI(r)}async callAI(e){return this.settings.aiProvider==="gemini"?await this.callGemini(e):this.settings.aiProvider==="openai"?await this.callOpenAI(e):await this.callAnthropic(e)}async callOpenAI(e){if(!this.settings.openaiApiKey)throw new Error("OpenAI API key not configured");let t=await(0,s.requestUrl)({url:"https://api.openai.com/v1/chat/completions",method:"POST",headers:{Authorization:`Bearer ${this.settings.openaiApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:this.settings.openaiModel,messages:[{role:"user",content:e}],max_tokens:4e3,temperature:.7})});if(t.status!==200)throw new Error(`OpenAI API error: ${t.status}`);return t.json.choices[0].message.content}async callAnthropic(e){if(!this.settings.anthropicApiKey)throw new Error("Anthropic API key not configured");let t=await(0,s.requestUrl)({url:"https://api.anthropic.com/v1/messages",method:"POST",headers:{"x-api-key":this.settings.anthropicApiKey,"Content-Type":"application/json","anthropic-version":"2023-06-01"},body:JSON.stringify({model:this.settings.anthropicModel,max_tokens:4e3,messages:[{role:"user",content:e}]})});if(t.status!==200)throw new Error(`Anthropic API error: ${t.status}`);return t.json.content[0].text}async callGemini(e){var n,a,r,l;if(!this.settings.geminiApiKey)throw new Error("Gemini API key not configured");let t=await(0,s.requestUrl)({url:`https://generativelanguage.googleapis.com/v1beta/models/${this.settings.geminiModel}:generateContent?key=${this.settings.geminiApiKey}`,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{maxOutputTokens:4e3,temperature:.7}})});if(t.status!==200)throw new Error(`Gemini API error: ${t.status}`);let i=t.json;if(i.candidates&&((l=(r=(a=(n=i.candidates[0])==null?void 0:n.content)==null?void 0:a.parts)==null?void 0:r[0])!=null&&l.text))return i.candidates[0].content.parts[0].text;throw new Error("Unexpected Gemini API response format")}async createArticleNote(e,t){var p;if(!this.session.materialNotePath)return null;let i=this.app.vault.getAbstractFileByPath(this.session.materialNotePath);if(!(i instanceof s.TFile))return null;let n=((p=i.parent)==null?void 0:p.path)||"",a=t.title.replace(/[\\/:*?"<>|]/g,"-").slice(0,50),r=n?`${n}/${a}.md`:`${a}.md`,l=1;for(;this.app.vault.getAbstractFileByPath(r);)r=n?`${n}/${a} ${l}.md`:`${a} ${l}.md`,l++;let c=this.session.materialNotePath.replace(/\.md$/,"").split("/").pop(),d=`# ${t.title}

> [!info] Generated with Thinking Tool
> Materials: [[${c}]]
> Generated: ${new Date().toISOString().split("T")[0]}

---

${e}

---

## Sources

- Materials: [[${c}]]
`;try{return await this.app.vault.create(r,d)}catch(T){return console.error("Failed to create article note:",T),null}}},b=class extends s.ItemView{constructor(e,t){super(e);this.currentSourcePath=null;this.connections=[];this.isLoading=!1;this.plugin=t}getViewType(){return v}getDisplayText(){return"Smart Connections"}getIcon(){return"link"}async onOpen(){let e=this.containerEl.children[1];e.empty(),e.addClass("thinking-tool-connections-view"),this.render()}async onClose(){}async loadConnections(e){this.currentSourcePath=e,this.isLoading=!0,this.render();let t=await this.plugin.getSmartConnections(e);this.connections=t||[],this.isLoading=!1,this.render()}render(){var c,d,p,T,F;let e=this.containerEl.children[1];e.empty();let t=e.createDiv({cls:"view-header"});t.createEl("h4",{text:"Related Notes"});let i=t.createDiv({cls:"view-actions"}),n=i.createEl("button",{text:"\u21BB"});n.setAttribute("title","Refresh"),n.onclick=()=>{this.currentSourcePath&&this.loadConnections(this.currentSourcePath)};let a=i.createEl("button",{text:"\u270D\uFE0F \uAE00\uC4F0\uAE30"});a.setAttribute("title","Generate Article"),a.onclick=()=>{this.plugin.openGenerateModal()};let r=i.createEl("button",{text:"\u{1F3C1} \uB9C8\uAC10"});if(r.setAttribute("title","End Session"),r.style.backgroundColor="var(--interactive-accent)",r.style.color="var(--text-on-accent)",r.onclick=()=>{this.plugin.endThinkingSession()},this.isLoading){e.createDiv({cls:"loading-state",text:"Loading connections..."});return}if(this.connections.length===0){let y=e.createDiv({cls:"empty-state"});y.createDiv({cls:"empty-icon",text:"\u{1F517}"}),y.createEl("p",{text:"No connections found. Make sure Smart Connections plugin is installed and has indexed your notes."});return}let l=e.createDiv({cls:"connections-list"});for(let y of this.connections){let m=(((c=y.item)==null?void 0:c.path)||((p=(d=y.item)==null?void 0:d.data)==null?void 0:p.path)||((T=y.item)==null?void 0:T.key)||"").split("#")[0];if(m&&!m.endsWith(".md")&&(m=m+".md"),!m)continue;let k=l.createDiv({cls:"connection-item"}),B=((F=m.split("/").pop())==null?void 0:F.replace(/\.md$/,""))||m;k.createSpan({cls:"connection-title",text:B});let D=Math.round((y.score||0)*100);k.createSpan({cls:"connection-score",text:`${D}%`}),k.dataset.path=m;let O=async u=>{var L,$,M;console.log("ThinkingTool: Click handler fired for path:",u);let g=this.app.vault.getAbstractFileByPath(u);if(!g&&u.endsWith(".md")&&(g=this.app.vault.getAbstractFileByPath(u.slice(0,-3))),!g){let f=(L=u.split("/").pop())==null?void 0:L.replace(/\.md$/,"");f&&(g=this.app.vault.getMarkdownFiles().find(W=>W.basename===f)||null,console.log("ThinkingTool: Searching by basename:",f,"Found:",g==null?void 0:g.path))}if(!(g instanceof s.TFile)){new s.Notice("File not found: "+u),console.error("ThinkingTool: File not found:",u);return}console.log("ThinkingTool: Found file:",g.path);let G=this.plugin.session.materialNotePath,w=null,I=this.app.workspace.getLeavesOfType("markdown");console.log("ThinkingTool: Found markdown leaves:",I.length);for(let f of I){let P=(M=($=f.view)==null?void 0:$.file)==null?void 0:M.path;if(console.log("ThinkingTool: Checking leaf with file:",P),P!==G){w=f;break}}w||(console.log("ThinkingTool: No suitable leaf found, creating new one"),w=this.app.workspace.getLeaf("split","vertical"));try{await w.openFile(g),this.plugin.session.leftLeafId=w.id,this.app.workspace.setActiveLeaf(w,{focus:!0}),await this.loadConnections(g.path),new s.Notice(`\u{1F4C4} ${g.basename}`),console.log("ThinkingTool: Successfully opened file")}catch(f){console.error("ThinkingTool: Error opening file:",f),new s.Notice("Error opening file: "+f)}};k.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),O(m)})}}},x=class extends s.Modal{constructor(o,e,t,i){super(o),this.plugin=e,this.selectedText=t,this.sourcePath=i}onOpen(){var c;let{contentEl:o}=this;o.addClass("thinking-tool-modal"),o.createEl("h2",{text:"Add Material"}),o.createDiv({cls:"quote-preview"}).setText(this.selectedText.length>200?this.selectedText.slice(0,200)+"...":this.selectedText);let t=(c=this.sourcePath.split("/").pop())==null?void 0:c.replace(/\.md$/,"");o.createDiv({cls:"source-info",text:`From: ${t}`});let i=o.createDiv({cls:"thought-input-container"});i.createEl("label",{text:"What's your thought on this?"});let n=i.createEl("textarea",{cls:"thought-input"});n.placeholder="Add your reflection, connection, or insight...";let a=o.createDiv({cls:"modal-buttons"}),r=a.createEl("button",{cls:"btn-secondary",text:"Cancel"});r.onclick=()=>this.close();let l=a.createEl("button",{cls:"btn-primary",text:"Add Material"});l.onclick=async()=>{await this.plugin.appendMaterial(this.selectedText,this.sourcePath,n.value),this.close()},setTimeout(()=>n.focus(),100)}onClose(){let{contentEl:o}=this;o.empty()}},C=class extends s.Modal{constructor(e,t){super(e);this.step=1;this.topics=[];this.selectedTopic=null;this.selectedPersona="essay";this.isGenerating=!1;this.plugin=t}async onOpen(){let{contentEl:e}=this;e.addClass("thinking-tool-generate-modal"),await this.render()}async render(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"Generate Article"});let t=e.createDiv({cls:"step-indicator"});for(let i=1;i<=3;i++){let n=t.createDiv({cls:`step ${i===this.step?"active":""}`});n.createSpan({cls:"step-number",text:String(i)}),n.createSpan({text:i===1?"Topics":i===2?"Persona":"Generate"})}if(this.isGenerating){let i=e.createDiv({cls:"generating-state"});i.createDiv({cls:"spinner"}),i.createEl("p",{text:"Generating..."});return}this.step===1?await this.renderStep1(e):this.step===2&&this.renderStep2(e)}async renderStep1(e){if(this.topics.length===0){e.createEl("p",{text:"Analyzing your materials..."});let r=await this.getMaterialsContent();if(!r){e.empty(),e.createEl("p",{text:"No materials found. Add some materials first!"});return}try{this.topics=await this.plugin.generateTopicSuggestions(r),this.render();return}catch(l){e.empty(),e.createEl("p",{text:`Error generating topics: ${l}`});return}}e.createEl("h3",{text:"Choose a Topic Angle"});let t=e.createDiv({cls:"topic-options"});for(let r of this.topics){let l=t.createDiv({cls:`topic-option ${this.selectedTopic===r?"selected":""}`});l.createDiv({cls:"topic-title",text:r.title}),l.createDiv({cls:"topic-description",text:r.description}),l.onclick=()=>{this.selectedTopic=r,this.render()}}let i=e.createDiv({cls:"modal-buttons"}),n=i.createEl("button",{cls:"btn-secondary",text:"Cancel"});n.onclick=()=>this.close();let a=i.createEl("button",{cls:"btn-primary",text:"Next"});a.disabled=!this.selectedTopic,a.onclick=()=>{this.selectedTopic&&(this.step=2,this.render())}}renderStep2(e){e.createEl("h3",{text:"Choose Writing Style"});let t=[{key:"essay",label:"\u{1F4DD} Essay"},{key:"blog",label:"\u{1F4AC} Blog"},{key:"academic",label:"\u{1F4DA} Academic"},{key:"twitter",label:"\u{1F426} Twitter Thread"}],i=e.createDiv({cls:"persona-selector"});for(let l of t){let c=i.createDiv({cls:`persona-option ${this.selectedPersona===l.key?"selected":""}`});c.setText(l.label),c.onclick=()=>{this.selectedPersona=l.key,this.render()}}let n=e.createDiv({cls:"modal-buttons"}),a=n.createEl("button",{cls:"btn-secondary",text:"Back"});a.onclick=()=>{this.step=1,this.render()};let r=n.createEl("button",{cls:"btn-primary",text:"Generate Article"});r.onclick=async()=>{await this.generateArticle()}}async getMaterialsContent(){if(!this.plugin.session.materialNotePath)return null;let e=this.app.vault.getAbstractFileByPath(this.plugin.session.materialNotePath);return e instanceof s.TFile?await this.app.vault.read(e):null}async generateArticle(){if(this.selectedTopic){this.isGenerating=!0,this.render();try{let e=await this.getMaterialsContent();if(!e)throw new Error("Could not read materials");let t=await this.plugin.generateArticle(e,this.selectedTopic,this.selectedPersona),i=await this.plugin.createArticleNote(t,this.selectedTopic);if(i)new s.Notice("Article created!"),await this.app.workspace.getLeaf().openFile(i),this.close();else throw new Error("Failed to create article note")}catch(e){new s.Notice(`Error: ${e}`),this.isGenerating=!1,this.render()}}}onClose(){let{contentEl:e}=this;e.empty()}},E=class extends s.PluginSettingTab{constructor(o,e){super(o,e),this.plugin=e}display(){let{containerEl:o}=this;o.empty(),o.addClass("thinking-tool-settings"),o.createEl("h2",{text:"Thinking Tool Settings"}),o.createEl("h3",{text:"AI Provider"}),new s.Setting(o).setName("Provider").setDesc("Choose your AI provider").addDropdown(e=>e.addOption("gemini","Google Gemini (Recommended)").addOption("openai","OpenAI").addOption("anthropic","Anthropic (Claude)").setValue(this.plugin.settings.aiProvider).onChange(async t=>{this.plugin.settings.aiProvider=t,await this.plugin.saveSettings()})),o.createEl("h4",{text:"Google Gemini"}),new s.Setting(o).setName("API Key").setDesc("Your Google AI Studio API key (aistudio.google.com)").addText(e=>e.setPlaceholder("AIza...").setValue(this.plugin.settings.geminiApiKey).onChange(async t=>{this.plugin.settings.geminiApiKey=t,await this.plugin.saveSettings()})),new s.Setting(o).setName("Model").setDesc("Gemini model to use").addText(e=>e.setPlaceholder("gemini-2.5-flash-preview-05-20").setValue(this.plugin.settings.geminiModel).onChange(async t=>{this.plugin.settings.geminiModel=t,await this.plugin.saveSettings()})),o.createEl("h4",{text:"OpenAI"}),new s.Setting(o).setName("API Key").setDesc("Your OpenAI API key").addText(e=>e.setPlaceholder("sk-...").setValue(this.plugin.settings.openaiApiKey).onChange(async t=>{this.plugin.settings.openaiApiKey=t,await this.plugin.saveSettings()})),new s.Setting(o).setName("Model").setDesc("OpenAI model to use").addText(e=>e.setPlaceholder("gpt-4o").setValue(this.plugin.settings.openaiModel).onChange(async t=>{this.plugin.settings.openaiModel=t,await this.plugin.saveSettings()})),o.createEl("h4",{text:"Anthropic"}),new s.Setting(o).setName("API Key").setDesc("Your Anthropic API key").addText(e=>e.setPlaceholder("sk-ant-...").setValue(this.plugin.settings.anthropicApiKey).onChange(async t=>{this.plugin.settings.anthropicApiKey=t,await this.plugin.saveSettings()})),new s.Setting(o).setName("Model").setDesc("Anthropic model to use").addText(e=>e.setPlaceholder("claude-sonnet-4-20250514").setValue(this.plugin.settings.anthropicModel).onChange(async t=>{this.plugin.settings.anthropicModel=t,await this.plugin.saveSettings()})),o.createEl("h3",{text:"General"}),new s.Setting(o).setName("Material Notes Folder").setDesc("Folder to save material notes (leave empty for same folder as source)").addText(e=>e.setPlaceholder("Materials").setValue(this.plugin.settings.materialNoteFolder).onChange(async t=>{this.plugin.settings.materialNoteFolder=t,await this.plugin.saveSettings()})),new s.Setting(o).setName("Connections Limit").setDesc("Maximum number of related notes to show").addSlider(e=>e.setLimits(5,50,5).setValue(this.plugin.settings.connectionsLimit).setDynamicTooltip().onChange(async t=>{this.plugin.settings.connectionsLimit=t,await this.plugin.saveSettings()})),o.createEl("h3",{text:"Writing / \uAE00\uC4F0\uAE30"}),new s.Setting(o).setName("Output Language / \uCD9C\uB825 \uC5B8\uC5B4").setDesc("Language for AI-generated content / AI\uAC00 \uC0DD\uC131\uD558\uB294 \uAE00\uC758 \uC5B8\uC5B4").addDropdown(e=>e.addOption("\uD55C\uAD6D\uC5B4","\uD55C\uAD6D\uC5B4 (Korean)").addOption("English","English").addOption("\u65E5\u672C\u8A9E","\u65E5\u672C\u8A9E (Japanese)").addOption("\u4E2D\u6587","\u4E2D\u6587 (Chinese)").addOption("Espa\xF1ol","Espa\xF1ol (Spanish)").addOption("Fran\xE7ais","Fran\xE7ais (French)").addOption("Deutsch","Deutsch (German)").setValue(this.plugin.settings.outputLanguage).onChange(async t=>{this.plugin.settings.outputLanguage=t,await this.plugin.saveSettings()}))}};
